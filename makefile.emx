# Dynamic Windows Interface Builder Makefile

CC = gcc
RM = rm -f
RC = rc
MAKE = make
COMPRESS = lxlite

DEFS =
LIBS =

include Version
VER_REV := $(shell hg log -r . --template={rev})

CFLAGS = -O -g -Zomf -Zmt -D__ST_MT_ERRNO__ -I. -Wall -I$(DWINCDIR) -DVER_MAJ=$(VER_MAJ) -DVER_MIN=$(VER_MIN) -DVER_REV=$(VER_REV) -o $(@)
LDFLAGS = -ldw -L$(DWLIBDIR)
RCFLAGS = -r


OBJECTS = dwib.obj

SOURCES = dwib.c

all: dwib.exe

$(OBJECTS):
	$(CC) $(CFLAGS) -c $<	

dwib.exe:  $(OBJECTS)
	$(RC) $(RCFLAGS) os2/dwib.rc
	$(CC) $(CFLAGS) $(DEFS) -o dwib.exe $(OBJECTS) $(LDFLAGS) os2/dwib.def dwib.res
#	$(COMPRESS) dwib.exe

clean: 
	$(RM) $(OBJECTS) dwib.exe dwib.res

dwib.obj: dwib.c dwib.h resources.h
dwib.res: dwib.rc resources.h

